HINTS
-----------------
This is the implementation of our paper "[HINTS: Citation Time Series Prediction for New Publications via Dynamic Heterogeneous Information Network Embedding](http://web.cs.ucla.edu/~yzsun/papers/2021_WWW_HINTS.pdf)", published in WWW'21.

Data
-----------------

The original data used could be access from [Aminer](https://www.aminer.org/citation)  and [APS](https://journals.aps.org/datasets).

We also provide our [processed data](https://www.dropbox.com/sh/zqj1r4icwophb3a/AAANshyUt-f5yT6w-9ri-WK-a?dl=0) to reproduce the results reported in our paper. 



Requirement
----------------------
All required packages could be found in `requirements.txt` (generated by `pip freeze`).

NOTE: our implementation is on Tensorflow 1.14, may not be very friendly if you are familar with dynamic computational graph based frameworks.



Train
----------------------

* Step0 (data): 
	* Download the [processed data](https://www.dropbox.com/sh/zqj1r4icwophb3a/AAANshyUt-f5yT6w-9ri-WK-a?dl=0) and `unzip *.zip` under the root folder.

* Step1 (run: HINTS):
	* `cd ./src`
	* For Aminer dataset: `python main.py --dataset aminer --epochs 700 --batch_size 3000`
	* For APS dataset: `python main.py --dataset aps --epochs 500 --batch_size 1200`

* Step2 (Experiment: HINTS-GCN):
	* For Aminer dataset: `python main.py --dataset aminer --epochs 700 --batch_size 3000 --gnn gcn`
	* For APS dataset: `python main.py --dataset aps --epochs 500 --batch_size 1200 --gnn gcn`

* Step3 (Experiment: HINTS-Seq):
	* For Aminer dataset: `python main.py --dataset aminer --epochs 700 --batch_size 3000 --method seq2seq`
	* For APS dataset: `python main.py --dataset aps --epochs 500 --batch_size 1200 --method seq2seq`

Arguments interpretation:

- `--dataset`: processed dataset, either AMiner or APS. 

- `--epochs`: number of training on the training set.

- `--batch_size` : batch size of one training.
- `--gnn` : Choices: ['rgcn', 'gcn']. 'gcn' is HINTS-GCN else HINTS
- `--method` : Choices: ['cave', 'seq2seq']. 'seq2seq' is HINTS-Seq else HINTS

Calculate MALE and RMSLE
----------------------

* HINTS:
	* For Aminer dataset: `python error_by_year.py HINTS aminer`
	* For APS dataset: `python error_by_year.py HINTS aps`

* HINTS-GCN:
	* For Aminer dataset: `python error_by_year.py gcn aminer`
	* For APS dataset: `python error_by_year.py gcn aps`

* HINTS-Seq:
	* For Aminer dataset: `python error_by_year.py seq2seq aminer`
	* For APS dataset: `python error_by_year.py seq2seq aps`

Note that the batch size in set as the number of papers used in training, i.e., there is only one interation per epoch. I didn't try "mini-batch"-like training.


The prediction files will be stored under the `result` folder.




Contact
----------------------
Song Jiang <songjiang@cs.ucla.edu>



Bibtex
----------------------

```bibtex
@inproceedings{hints,
  title={HINTS: Citation Time Series Prediction for New Publications via Dynamic Heterogeneous Information Network Embedding},
  author={Song Jiang, Bernard J. Koch, Yizhou Sun},
  booktitle={Proceedings of The Web Conference},
  year={2021}
}
```


